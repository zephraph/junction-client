<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The Junction configuration API. This crate allows you to build configuration for a dynamic HTTP client and export it to a control plane or pass it directly to an in-process client. Junction configuration is expressable as plain Rust strucs, and can be serialized/deserialized with a serde compatible library."><title>junction_api - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-492a78a4a87dcc01.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="junction_api" data-themes="" data-resource-suffix="" data-rustdoc-version="1.82.0 (f6e511eec 2024-10-15)" data-channel="1.82.0" data-search-js="search-a99f1315e7cc5121.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-921df33f47b8780c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-3b12f09e550e0385.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../junction_api/index.html">junction_<wbr>api</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li></ul></section></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">junction_api</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/junction_api/lib.rs.html#1-935">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The Junction configuration API. This crate allows you to build configuration
for a dynamic HTTP client and export it to a control plane or pass it
directly to an in-process client. Junction configuration is expressable as
plain Rust strucs, and can be serialized/deserialized with a <a href="https://docs.rs/serde/1.0.210/serde/index.html" title="mod serde">serde</a>
compatible library.</p>
<p>All of the configuration here should be correct by construction - if you can
create a struct, it’s valid Junction configuration. Different
representations of the same configuration are possible, and clients and
control planes may normalize your configuration differently, so when writing
tests for your configuration be aware that it may be normalized while
converting between different formats or data sources.</p>
<h2 id="core-concepts"><a class="doc-anchor" href="#core-concepts">§</a>Core Concepts</h2><h3 id="targets"><a class="doc-anchor" href="#targets">§</a>Targets</h3>
<p>The Junction API is built around the idea of a traffic <a href="enum.Target.html" title="enum junction_api::Target">Target</a>, a a unique
identifier for a place to send traffic. Targets are logical; a Kubernetes
Service target represents the entire service, running <a href="https://github.com/kubernetes/community/blob/master/sig-multicluster/namespace-sameness-position-statement.md">anywhere in a
multi-cluster deployment</a>, not an individual Pod or Node or
Service object.</p>
<h3 id="routes"><a class="doc-anchor" href="#routes">§</a>Routes</h3>
<p>An HTTP <a href="http/struct.Route.html" title="struct junction_api::http::Route">Route</a> is the client facing half of Junction,
and contains most of the things you’d traditionally find in a hand-rolled
HTTP client - timeouts, retries, URL rewriting and more.  The <a href="http/index.html" title="mod junction_api::http">http</a>
module’s documentation goes into detail on how and why to configure a Route.</p>
<h3 id="backends"><a class="doc-anchor" href="#backends">§</a>Backends</h3>
<p>A <a href="backend/struct.Backend.html" title="struct junction_api::backend::Backend">Backend</a> is the Service oriented half of
Junction configuration. Backends configuration gives you control over the
things you’d normally configure in a reverse proxy or a traditional load
balancer, like load balancing. See the <a href="backend/index.html" title="mod junction_api::backend">backend</a> module’s documentation for
more detail.</p>
<h2 id="crate-feature-flags"><a class="doc-anchor" href="#crate-feature-flags">§</a>Crate Feature Flags</h2>
<p>The following feature flags are available:</p>
<ul>
<li>
<p>The <code>kube</code> feature includes conversions from Junction configuration to and
from Kubernetes objects. This feature depends on the <code>kube</code> and
<code>k8s-openapi</code> crates. See the <a href="kube/index.html" title="mod junction_api::kube">kube</a> module docs for more detail.</p>
</li>
<li>
<p>The <code>xds</code> feature includes conversions from Junction configuration to and
from xDS types. This feature depends on the [xds-api][xds_api] crate.</p>
</li>
</ul>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="backend/index.html" title="mod junction_api::backend">backend</a></div><div class="desc docblock-short">Backends are the logical target of network traffic. They have an identity and
a load-balancing policy. See <a href="backend/struct.Backend.html" title="struct junction_api::backend::Backend">Backend</a> to get started.</div></li><li><div class="item-name"><a class="mod" href="http/index.html" title="mod junction_api::http">http</a></div><div class="desc docblock-short">HTTP <a href="http/struct.Route.html" title="struct junction_api::http::Route">Route</a> configuration. <a href="http/struct.Route.html" title="struct junction_api::http::Route">Route</a>s dynamically congfigure things you might
put directly in client code like timeouts and retries, failure detection, or
picking a different backend based on request data.</div></li><li><div class="item-name"><a class="mod" href="kube/index.html" title="mod junction_api::kube">kube</a></div><div class="desc docblock-short">Types and re-exports for converting Junction types to Kubernetes objects.</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.BackendId.html" title="struct junction_api::BackendId">Backend<wbr>Id</a></div><div class="desc docblock-short">A target and port together uniquely represent a <a href="backend/struct.Backend.html" title="struct junction_api::backend::Backend">Backend</a>.</div></li><li><div class="item-name"><a class="struct" href="struct.Dns.html" title="struct junction_api::Dns">Dns</a></div><div class="desc docblock-short">A DNS name to target with traffic.</div></li><li><div class="item-name"><a class="struct" href="struct.Duration.html" title="struct junction_api::Duration">Duration</a></div><div class="desc docblock-short">A wrapper around <a href="https://doc.rust-lang.org/1.82.0/core/time/struct.Duration.html" title="struct core::time::Duration">std::time::Duration</a> that serializes to and from a f64
number of seconds.</div></li><li><div class="item-name"><a class="struct" href="struct.Error.html" title="struct junction_api::Error">Error</a></div><div class="desc docblock-short">An error converting a Junction API type into another type.</div></li><li><div class="item-name"><a class="struct" href="struct.Fraction.html" title="struct junction_api::Fraction">Fraction</a></div><div class="desc docblock-short">A fraction, expressed as a numerator and a denominator.</div></li><li><div class="item-name"><a class="struct" href="struct.Hostname.html" title="struct junction_api::Hostname">Hostname</a></div><div class="desc docblock-short">AN RFC 1123 DNS domain name.</div></li><li><div class="item-name"><a class="struct" href="struct.KubeService.html" title="struct junction_api::KubeService">Kube<wbr>Service</a></div><div class="desc docblock-short">A Kubernetes Service to target with traffic.</div></li><li><div class="item-name"><a class="struct" href="struct.Name.html" title="struct junction_api::Name">Name</a></div><div class="desc docblock-short">An RFC 1035 compatible name. This name must be useable as a component of a
DNS subdomain - it must start with a lowercase ascii alphabetic character
and may only consist of ascii lowercase alphanumeric characters and the <code>-</code>
character.</div></li><li><div class="item-name"><a class="struct" href="struct.Regex.html" title="struct junction_api::Regex">Regex</a></div><div class="desc docblock-short">A regular expression.</div></li><li><div class="item-name"><a class="struct" href="struct.VirtualHost.html" title="struct junction_api::VirtualHost">Virtual<wbr>Host</a></div><div class="desc docblock-short">A virtual hostname. <code>VirtualHosts</code> represent the primary layer of
indirection in Junction. Traffic sent to a <code>VirtualHost</code> is routed to an
appropriate backend based on the content of the request.</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.Target.html" title="enum junction_api::Target">Target</a></div><div class="desc docblock-short">A traffic target. Traffic targets are abstract, uniquely identifiable places
to route traffic, like a DNS name or a Kubernetes Service.</div></li></ul></section></div></main></body></html>